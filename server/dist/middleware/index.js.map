{"version":3,"sources":["../../src/middleware/index.js"],"names":[],"mappings":";;;;;;;;yBAAsB,YAAY;;;;uBACd,aAAa;;;;uBACb,aAAa;;;;qBACf,WAAW;;;;0BACN,iBAAiB;;;;qBACtB,WAAW;;;;2BACL,kBAAkB;;;;oBACzB,gBAAgB;;;;AAEjC,SAAS,UAAU,GAAG;AACpB,SAAO;AACL,QAAI,EAAE,OAAO,CAAC,QAAQ,CAAC;AACvB,QAAI,EAAE,OAAO,CAAC,QAAQ,CAAC;GACxB,CAAA;CACF;;qBAEc,UAAC,GAAG,EAAK;AACtB,MAAM,WAAW,GAAG,UAAU,EAAE,CAAA;AAChC,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAA;AACzB,KAAG,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAA;;AAEtB,KAAG,CAAC,GAAG,CAAC,mBAAM,CAAC,CAAA;AACf,KAAG,CAAC,GAAG,CAAC,qBAAQ,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,CAAC,wBAAW,CAAC,CAAA;AACpB,KAAG,CAAC,GAAG,CAAC,yBAAY,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC,CAAA;;AAEzD,KAAG,CAAC,GAAG,CAAC,qBAAQ,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAA;AACrC,KAAG,CAAC,GAAG,CAAC,oBAAO,CAAC,CAAA;AAChB,KAAG,CAAC,GAAG,CAAC,mBAAM,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA;AAC5C,KAAG,CAAC,GAAG,CAAC,wBAAW,GAAG,CAAC,CAAC,CAAA;AACxB,KAAG,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;;AAEpC,SAAO,WAAW,CAAA;CACnB","file":"server/src/middleware/index.js","sourcesContent":["import koaLogger from 'koa-logger'\nimport session from 'koa-session'\nimport favicon from 'koa-favicon'\nimport views from 'koa-views'\nimport trieRouter from 'koa-trie-router'\nimport flash from 'koa-flash'\nimport staticCache from 'koa-static-cache'\nimport body from 'koa-bodyparser'\n\nfunction middleware() {\n  return {\n    user: require('./user'),\n    auth: require('./auth')\n  }\n}\n\nexport default (app) => {\n  const middlewares = middleware()\n  const config = app.config\n  app.keys = config.keys\n\n  app.use(body())\n  app.use(favicon(config.faviconPath));\n  app.use(koaLogger())\n  app.use(staticCache(config.staticPath, config.staticOpt))\n    // views中间件必须在路由上面\n  app.use(session(config.session, app))\n  app.use(flash())\n  app.use(views(config.viewPath, config.view))\n  app.use(trieRouter(app))\n  app.use(middlewares.auth.checkLogin)\n\n  return middlewares\n}"]}